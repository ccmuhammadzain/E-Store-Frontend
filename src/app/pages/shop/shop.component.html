<div class="p-6 bg-gray-50 min-h-screen">
  <h2 class="text-3xl font-bold mb-4 text-gray-800 text-center">Shop</h2>

  <!-- Search Bar -->
  <div class="max-w-xl mx-auto mb-6">
    <div class="relative">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (ngModelChange)="onSearchTermChange()"
        placeholder="Search products (title, brand, category)..."
        class="w-full px-4 py-2 pr-10 rounded-lg border border-gray-300 focus:ring-2 focus:ring-yellow-400 focus:outline-none shadow-sm"
      />
      <button
        *ngIf="searchTerm"
        (click)="clearSearch()"
        class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"
        aria-label="Clear search"
      >
        âœ•
      </button>
    </div>
  </div>

  <!-- Categories Filter -->
  <div class="flex flex-wrap justify-center gap-3 mb-6">
    <button
      *ngFor="let cat of categories"
      (click)="filterByCategory(cat)"
      [ngClass]="{
        'bg-yellow-500 text-white': selectedCategory === cat,
        'bg-white text-gray-700 hover:bg-yellow-100': selectedCategory !== cat,
      }"
      class="px-4 py-2 rounded-full shadow-sm border border-gray-300 transition"
    >
      {{ cat }}
    </button>
    <button
      (click)="filterByCategory('All')"
      [ngClass]="{
        'bg-yellow-500 text-white': selectedCategory === 'All',
        'bg-white text-gray-700 hover:bg-yellow-100': selectedCategory !== 'All',
      }"
      class="px-4 py-2 rounded-full shadow-sm border border-gray-300 transition"
    >
      All
    </button>
  </div>

  <!-- Product Grid -->
  <div *ngIf="filteredProducts.length === 0" class="text-center text-gray-500 mt-10">
    No products match your search.
  </div>

  <div
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
    *ngIf="filteredProducts.length > 0"
  >
    <div
      *ngFor="let p of filteredProducts"
      class="bg-white rounded-xl shadow-md overflow-hidden transform hover:scale-105 transition duration-300"
    >
      <img [src]="p.productImage" alt="{{ p.title }}" class="w-full h-48 object-cover" />

      <div class="p-4">
        <h3 class="text-lg font-semibold text-gray-800">{{ p.title }}</h3>
        <p class="text-gray-500 text-sm">{{ p.category }} | {{ p.brand || '-' }}</p>
        <p class="text-green-600 font-bold mt-2 text-lg">Price: ${{ p.price }}</p>
        <p class="text-gray-600 mt-1 text-sm">Stock: {{ p.stock }}</p>

        <button
          class="mt-4 w-full bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-2 rounded-lg shadow-sm transition"
          (click)="addToCart(p)"
        >
          Add to Cart
        </button>
      </div>
    </div>
  </div>
</div>
