<nav class="bg-gray-800 text-white px-4 py-3">
  <div class="flex flex-wrap items-center align-middle justify-between max-w-screen-xl mx-auto">

    <!-- Logo -->
    <a routerLink="/home" class="flex items-center gap-2 text-lg font-bold">
      <img src="assets/fial-logo.png" alt="ElectroCart Logo" class="h-8 w-8 object-contain select-none" />
      <span>ElectroCart</span>
    </a>

    <!-- Mobile Menu Toggle -->
    <button 
      (click)="isMenuOpen = !isMenuOpen"
      class="inline-flex items-center p-2 text-gray-400 rounded-lg md:hidden hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-600"
      type="button" 
      aria-label="Toggle navigation"
    >
      <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>

    <!-- Nav Items -->
    <div [ngClass]="{'hidden': !isMenuOpen}" class="w-full md:flex md:items-center md:w-auto">
      <ul class="flex flex-col mt-3 space-y-2 md:space-y-0 md:flex-row md:space-x-6 md:mt-0">
        <li>
          <a routerLink="/home" routerLinkActive="text-yellow-400" [routerLinkActiveOptions]="{ exact: true }" class="hover:text-yellow-300">
            Home
          </a>
        </li>

        <!-- Admin sees Inventory -->
  <li *ngIf="isAdmin()">
          <a routerLink="/inventory" routerLinkActive="text-yellow-400" class="hover:text-yellow-300">
            Inventory
          </a>
        </li>

        <!-- Customer sees Shop -->
  <li *ngIf="isCustomer()">
          <a routerLink="/shop" routerLinkActive="text-yellow-400" class="hover:text-yellow-300">
            Shop
          </a>
        </li>

        <!-- Bills for both -->
        <li *ngIf="user">
          <a routerLink="/bills" routerLinkActive="text-yellow-400" class="hover:text-yellow-300">
            Bills
          </a>
        </li>

        <!-- Cart for Customers -->
  <li *ngIf="isCustomer()">
          <a routerLink="/cart" routerLinkActive="text-yellow-400" class="hover:text-yellow-300 flex items-center gap-1">
            ðŸ›’ Cart
            <span *ngIf="cartItemCount > 0" class="bg-yellow-500 text-white text-xs font-bold px-2 py-0.5 rounded-full">
              {{ cartItemCount }}
            </span>
          </a>
        </li>

        <!-- Customers only for Admin -->
  <li *ngIf="isAdmin()">
          <a routerLink="/customers" routerLinkActive="text-yellow-400" class="hover:text-yellow-300">
            Customers
          </a>
        </li>
      </ul>

      <!-- Search -->
      <form class="flex items-center mt-3 md:mt-0 md:ml-6" role="search" (submit)="onSearch($event)">
        <input 
          type="search" 
          placeholder="Search products..." 
          aria-label="Search" 
          [(ngModel)]="searchTerm"
          name="globalSearch"
          class="px-3 py-1 rounded-l-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-yellow-400 text-black"
        />
        <button 
          type="submit" 
          class="px-4 py-1 bg-yellow-500 hover:bg-yellow-600 text-white"
          [class.rounded-r-md]="!searchTerm"
        >
          Go
        </button>
        <button *ngIf="searchTerm" type="button" (click)="searchTerm=''; onSearch($event)" class="px-2 py-1 bg-gray-600 hover:bg-gray-500 text-white rounded-r-md">âœ•</button>
      </form>
    </div>

    <!-- ðŸ”‘ Auth Links -->
    <div class="flex items-center mt-3 md:mt-0 md:ml-6 space-x-4">
      <!-- Login/Signup if not logged in -->
      <ng-container *ngIf="!isLoggedIn">
        <a 
          routerLink="/login" 
          class="px-4 py-1.5 rounded-lg bg-yellow-500 hover:bg-yellow-600 text-white font-medium shadow">
          Login
        </a>
        <a 
          routerLink="/signup" 
          class="px-4 py-1.5 rounded-lg border border-yellow-500 text-yellow-500 hover:bg-yellow-500 hover:text-white font-medium shadow">
          Signup
        </a>
      </ng-container>

      <!-- Logout if logged in -->
      <ng-container *ngIf="isLoggedIn">
        <span class="text-gray-300">Hi, {{ user?.username }}</span>
        <button 
          (click)="logout()" 
          class="px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white font-medium shadow">
          Logout
        </button>
      </ng-container>
    </div>

  </div>
</nav>

<!-- Global Toasts -->
<app-toast-container></app-toast-container>
